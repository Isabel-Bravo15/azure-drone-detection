#!/bin/bash
# Azure Startup Script

echo "========================================"
echo "Drone Detection - Azure Deployment"
echo "========================================"

# Descargar el modelo si no existe
if [ ! -f "best.pt" ]; then
    echo "ğŸ“¥ Descargando modelo best.pt..."
    wget -O best.pt "https://huggingface.co/doguilmak/Drone-Detection-YOLOv11x/resolve/main/weight/best.pt"
    
    if [ $? -eq 0 ]; then
        echo "âœ… Modelo descargado exitosamente"
    else
        echo "âŒ Error al descargar el modelo"
        # Continuar sin modelo para pruebas
        touch best.pt
    fi
else
    echo "âœ… Modelo best.pt ya existe"
fi

# Instalar dependencias
echo "ğŸ“¦ Instalando dependencias..."
pip install --upgrade pip
pip install -r requirements.txt    # â† USA requirements.txt

# Ejecutar servidor
echo "ğŸš€ Starting Azure-optimized server..."
python app_azure.py --host 0.0.0.0 --port 8000
